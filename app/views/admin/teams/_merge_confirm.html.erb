<%# TODO: Disable drag and re-enable on Cancel or OK %>

<% if @existing_teams.size == 1 %>
<% form_remote_tag(:url => "/admin/racers/merge") do -%>
  <span><%= text_field_tag 'name', @team.name, :size => 30, :disabled => true %></span>
  <%= hidden_field_tag "id", @team.id %>
  <%= hidden_field_tag "target_id", @existing_teams.first.id %>
  <div style=" background-image: url(/images/icons/warn.gif); background-position: 0px 6px; background-repeat: no-repeat; width: 276px; white-space: normal; margin-left: 6px; padding-left: 24px;">
    <%= @existing_teams.first.name %> <%= aka(@existing_teams.first) %> already exists.
  </div>
  <div style="width: 276px; white-space: normal; margin-left: 6px; padding-left: 24px;">
    Delete <%= @original_name %> and move results to <%= @existing_teams.first.name %>?
  </div>
  <div style="width: 300px; margin-left: auto; text-align: right;">
    <button type="submit" name="cancel" id="cancel_button" value="Cancel">Cancel</button><button type="submit" name="ok" id="ok_button" value="OK">OK</button>
  </div>
<% end -%>

<% else %>

<%= form_remote_tag(:url => {:action => 'merge'}, :success => 'document.location.reload(true)') %>
  <%= text_field_tag 'name', @team.name, :size => 40, :style => "margin-left: 24px;" %>
  <div style=" background-image: url(/images/icons/warn.gif); background-position: 2px 2px; background-repeat: no-repeat; padding-left: 24px; width: 300px; white-space: normal;">
  <%= @existing_teams.first.name %> already exists.
  </div>
  <div style="padding-left: 24px; width: 300px; white-space: normal;">
    Delete <%= @original_name %> and move results to:
  </div>
<% for existing_team in @existing_teams %>
  <%= radio_button_tag "id", "team_#{@team.to_param}", false, :style => "width: auto;" %> 
  <%= existing_team.name %> 
  <br>
<% end %>

<%= hidden_field_tag "target_id", @existing_teams.first.id %>

<div align="right" style="padding-right: 2px;">
  <%= link_to_remote( 
        image_tag('/images/buttons/small/cancel.gif', :height => 22, :width => 44), 
        :update => "team_#{@team.id}_name", 
        :url => { :action => "cancel", :id => @team.to_param },
        :html => { :class => "image" }
      )
   %>
  <%= image_submit_tag '/images/buttons/small_ok.gif', :height => 22, :width => 44, :class => "button" %>
</div>
</form>

<% end %>
