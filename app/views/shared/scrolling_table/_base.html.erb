<div class="scrolling_table">
  <!--This is a super hack job to get the table header to remain fixed, the columns to stay lined up, and the scrollbar to be covered up on the header-->
  <div class="headers">
    <table cellspacing="0" class="<%= scrolling_table.plural_record_type %>">
      <thead>
        <tr>
          <% scrolling_table.columns.each do |column| -%>
          <th class="<%= column.style_class %>"><%= column.title %></th>
          <%- end %>
        </tr>
      </thead>
    </table>
  </div>
  <div class="scroll_bar_cover_container">
    <div class="scroll_bar_cover_up"></div>
  </div>
  <!--END hack job-->

  <div class="records" id="records">
    <table cellspacing="0" class="<%= scrolling_table.plural_record_type %>" id="<%= scrolling_table.plural_record_type %>">
    <tbody>
      <%= render :partial => scrolling_table.record_type, :collection => scrolling_table.records %>
    </tbody>
    </table>
  </div>
</div>

<div class="buttons">
  <div style="float: left;">
    <button type="button"
            name="new" id="new_button" value="+" class="new disabled">&nbsp;</button><button 
               type="button" name="delete" id="delete_button" value="&ndash;" class="delete disabled">&nbsp;</button>
  </div>
  <div style="float: right;">
    <% scrolling_table.buttons.each do |button| -%>
      <%= content_tag("button", button.text, { :type => 'button', :name => button.name, :id => button.style_id, :value => button.value, :class => "disabled" }) %>
    <%- end %>
  </div>
</div>

<script type="text/javascript" charset="utf-8">
  document.observe("dom:loaded", function() {
    newScrollingTable('<%= scrolling_table.plural_record_type %>', 
                      '<%= scrolling_table.record_type %>', 
                      [<%= scrolling_table.records.map { |record| record.id }.join(",") %>]);
    scrollingTable = $('<%= scrolling_table.plural_record_type %>');
    Event.observe($('new_button'), 'mousedown', scrollingTable.redirectToNew.bindAsEventListener(scrollingTable));
    Event.observe($('delete_button'), 'mousedown', scrollingTable.deleteRecord.bindAsEventListener(scrollingTable));
    Event.observe($('results_button'), 'mousedown', scrollingTable.redirectToResults.bindAsEventListener(scrollingTable));
    Event.observe($('edit_button'), 'mousedown', scrollingTable.redirectToEdit.bindAsEventListener(scrollingTable));
  });
</script>
