include_partial 'fixtures'

open '/admin/account/login'
assert_text_not_present 'error'
assert_location '*/admin/account/login'
assert_text_present 'Login'
assert_element_present 'username'
assert_element_present 'user_password'
type 'username', 'candi'
type 'user_password', 'candi_password'
click_and_wait 'name=login'
assert_text_not_present 'error'
assert_location '*/admin'

open '/admin/racers/2'
assert_text_present 'Mark Matson'
click 'destroy_number_3'
pause 300
click_and_wait 'save'
assert_text_not_present 'error'
assert_text_not_present 'Unknown action'
assert_text_not_present 'has no parent'
assert_text_not_present "Couldn't find RaceNumber"

assert_location '*/admin/racers/2'
