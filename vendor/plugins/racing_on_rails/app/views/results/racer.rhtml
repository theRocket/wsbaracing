<% @page_title = "Results: #{@racer.name}" %>

<table class="yellow" border="0" cellspacing="0" cellpadding="0">
  <tr>
    <th colspan="5"><%= @racer.name %></th>
  </tr>
  <tr>
    <td width="24" id="table_sub_head"></td>
    <td width="400" id="table_sub_head">RACE</td>
    <td width="200" id="table_sub_head">CATEGORY</td>
    <td width="100" id="table_sub_head">DATE</td>
    <td width="50">&nbsp;</td>
  </tr>
  <% for result in @racer.event_results.sort_by {|result| result.race.standings.event.date } %>
  <tr>
    <td align="right" width="24"><%= result.place %></td>
    <td width="400"><%= result.race.standings.name %></td>
    <td width="200"><%= result.race.name %></td>
    <td width="100"><%= result.race.standings.event.date.strftime("%D") %></td>
    <td width="50">&nbsp;</td>
  </tr>
  <% end %>
</table>

<% for result in @racer.competition_results %>

<br/><br/>

<table class="yellow" border="0" cellspacing="0" cellpadding="0">
  <tr>
    <th width="24" style="text-align: right;"><%= result.place %></th>
    <th colspan="2" width="600">
      <%= result.race.standings.event.name %> 
      <%= result.race.standings.name unless result.race.standings.event.name == result.race.standings.name %> 
      <%= result.race.name unless result.race.name == 'Ironman' %></th>
    <th colspan="2" width="150" style="text-align: right;"></th>
  </tr>
  <tr>
    <td width="24" id="table_sub_head"></td>
    <td width="400" id="table_sub_head">RACE</td>
    <td width="200" id="table_sub_head">CATEGORY</td>
    <td width="100" id="table_sub_head">DATE</td>
    <td width="50" id="table_sub_head" align="right">POINTS</td>
  </tr>
  <% for score in result.scores %>
  <tr>
    <td align="right" width="24"><%= score.source_result.place %></td>
    <td width="400"><%= score.source_result.race.standings.name %></td>
    <td width="200"><%= score.source_result.race.name %></td>
    <td width="100"><%= score.source_result.race.standings.event.date.strftime("%D") %></td>
    <td align="right" width="50"><%= number_with_precision(score.points, 1) %></td>
  </tr>
  <% end %>
  <tr>
    <td align="right" width="24"></td>
    <td width="400"></td>
    <td width="200"></td>
    <td colspan="2" align="right" width="150"><span id="total">TOTAL</span><%= number_with_precision(result.points, 1) %></td>
  </tr>
</table>
<% end %>
